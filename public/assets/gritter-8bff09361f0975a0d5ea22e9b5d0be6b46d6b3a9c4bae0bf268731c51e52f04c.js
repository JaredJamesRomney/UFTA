window.GritterModernizr=function(e,t,i){function r(e,t){var i=e.charAt(0).toUpperCase()+e.substr(1);return n((e+" "+h.join(i+" ")+i).split(" "),t)}function n(e,t){for(var r in e)if(m[e[r]]!==i)return"pfx"!=t||e[r];return!1}function o(e,t){return!!~(""+e).indexOf(t)}function s(e,t){return typeof e===t}function c(e){m.cssText=e}var a,u,_="2.0.6",d={},l=t.documentElement,f=(t.head||t.getElementsByTagName("head")[0],"modernizr"),p=t.createElement(f),m=p.style,h=(Object.prototype.toString,"Webkit Moz O ms Khtml".split(" ")),v={},g=[],y=function(e,i,r,n){var o,s,c,a=t.createElement("div");if(parseInt(r,10))for(;r--;)c=t.createElement("div"),c.id=n?n[r]:f+(r+1),a.appendChild(c);return o=["&shy;","<style>",e,"</style>"].join(""),a.id=f,a.innerHTML+=o,l.appendChild(a),s=i(a,e),a.parentNode.removeChild(a),!!s},b={}.hasOwnProperty;u=s(b,i)||s(b.call,i)?function(e,t){return t in e&&s(e.constructor.prototype[t],i)}:function(e,t){return b.call(e,t)},v.rgba=function(){return c("background-color:rgba(150,255,150,.5)"),o(m.backgroundColor,"rgba")},v.borderradius=function(){return r("borderRadius")};for(var w in v)u(v,w)&&(a=w.toLowerCase(),d[a]=v[w](),g.push((d[a]?"":"no-")+a));return c(""),p=null,d._version=_,d._domPrefixes=h,d.testProp=function(e){return n([e])},d.testAllProps=r,d.testStyles=y,d}(0,this.document),function(e){e.gritter={},e.gritter.options={position:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},e.gritter.add=function(e){try{return i.add(e||{})}catch(r){var t="Gritter Error: "+r;"undefined"!=typeof console&&console.error?console.error(t,e):alert(t)}},e.gritter.remove=function(e,t){i.removeSpecific(e,t||{})},e.gritter.removeAll=function(e){i.stop(e||{})};var t='[[close]][[image]]<div class="[[class_name]]"><span class="gritter-title">[[username]]</span><p>[[text]]</p></div><div style="clear:both"></div>',i={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<div class="gritter-close"></div>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none">'+(GritterModernizr.borderradius&&GritterModernizr.rgba?'<div class="gritter-item gritter-css3">'+t+"</div>":'<div class="gritter-top"></div><div class="gritter-item gritter-css2">'+t+'</div><div class="gritter-bottom"></div>')+"</div>",_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(t){if(!t.title||!t.text)throw'You need to fill out the first 2 params: "title" and "text"';this._is_setup||this._runSetup();var r=t.title,n=t.text,o=t.image||"",s=t.sticky||!1,c=t.class_name||"",a=e.gritter.options.position,u=t.time||"";this._verifyWrapper(),this._item_count++;var _=this._item_count,d=this._tpl_item;e(["before_open","after_open","before_close","after_close","on_click"]).each(function(r,n){i["_"+n+"_"+_]=e.isFunction(t[n])?t[n]:function(){}}),this._custom_timer=0,u&&(this._custom_timer=u);var l=""!=o?'<img src="'+o+'" class="gritter-image" />':"",f=""!=o?"gritter-with-image":"gritter-without-image";d=this._str_replace(["[[username]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[r,n,this._tpl_close,l,this._item_count,f,c],d),this["_before_open_"+_](),e("#gritter-notice-wrapper").addClass(a).append(d);var p=e("#gritter-item-"+this._item_count);return p.fadeIn(this.fade_in_speed,function(){i["_after_open_"+_](e(this))}),s||this._setFadeTimer(p,_),e(p).click(function(){i["_on_click_"+_](e(this))}),e(p).find(".gritter-close").bind("mouseenter mouseleave",function(t){"mouseenter"==t.type?e(p).off("click"):e(p).on("click",function(){i["_on_click_"+_](e(this))})}),e(p).bind("mouseenter mouseleave",function(t){"mouseenter"==t.type?s||i._restoreItemIfFading(e(this),_):s||i._setFadeTimer(e(this),_),i._hoverState(e(this),t.type)}),_},_countRemoveWrapper:function(t,i,r){i.remove(),this["_after_close_"+t](i,r),0==e(".gritter-item-wrapper").length&&e("#gritter-notice-wrapper").remove()},_fade:function(e,t,r,n){var o="undefined"==typeof(r=r||{}).fade||r.fade;fade_out_speed=r.speed||this.fade_out_speed,manual_close=n,this["_before_close_"+t](e,manual_close),n&&e.unbind("mouseenter mouseleave"),o?e.fadeOut(fade_out_speed,function(){e.animate({height:0},300,function(){i._countRemoveWrapper(t,e,manual_close)})}):this._countRemoveWrapper(t,e)},_hoverState:function(e,t){"mouseenter"==t?(e.addClass("hover"),e.find(".gritter-close").show(),e.find(".gritter-close").click(function(){var t=e.attr("id").split("-")[2];i.removeSpecific(t,{},e,!0)})):(e.removeClass("hover"),e.find(".gritter-close").hide())},removeSpecific:function(t,i,r,n){if(!r)r=e("#gritter-item-"+t);this._fade(r,t,i||{},n)},_restoreItemIfFading:function(e,t){clearTimeout(this["_int_id_"+t]),e.stop().css({opacity:""})},_runSetup:function(){for(var t in e.gritter.options)this[t]=e.gritter.options[t];this._is_setup=1},_setFadeTimer:function(e,t){var r=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+t]=setTimeout(function(){i._fade(e,t)},r)},stop:function(t){var i=e.isFunction(t.before_close)?t.before_close:function(){},r=e.isFunction(t.after_close)?t.after_close:function(){},n=e("#gritter-notice-wrapper");i(n),n.fadeOut(function(){e(this).remove(),r()})},_str_replace:function(e,t,i,r){var n=0,o=0,s="",c="",a=0,u=0,_=[].concat(e),d=[].concat(t),l=i,f=d instanceof Array,p=l instanceof Array;for(l=[].concat(l),r&&(this.window[r]=0),n=0,a=l.length;n<a;n++)if(""!==l[n])for(o=0,u=_.length;o<u;o++)s=l[n]+"",c=f?d[o]!==undefined?d[o]:"":d[0],l[n]=s.split(_[o]).join(c),r&&l[n]!==s&&(this.window[r]+=(s.length-l[n].length)/_[o].length);return p?l:l[0]},_verifyWrapper:function(){0==e("#gritter-notice-wrapper").length&&e("body").append(this._tpl_wrap)}}}(jQuery);